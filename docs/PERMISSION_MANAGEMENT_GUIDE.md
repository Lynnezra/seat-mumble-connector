# Mumble æƒé™ç®¡ç†å®Œæ•´æŒ‡å—

## ğŸ¯ æ¦‚è¿°

Mumble è¿æ¥å™¨ç°åœ¨æä¾›äº†å®Œæ•´çš„æƒé™ç®¡ç†ç³»ç»Ÿï¼Œå…è®¸æ‚¨ï¼š

- æŒ‡å®šç‰¹å®šç”¨æˆ·ä¸ºç®¡ç†å‘˜
- åŸºäº SeAT è§’è‰²è‡ªåŠ¨åˆ†é…æƒé™
- åŸºäºå†›å›¢èŒä½åˆ†é…æƒé™
- é€šè¿‡ Web ç•Œé¢å’Œå‘½ä»¤è¡Œç®¡ç†æƒé™
- è‡ªåŠ¨åŒæ­¥æƒé™åˆ° Mumble æœåŠ¡å™¨

## ğŸ”§ æƒé™çº§åˆ«

### ç®¡ç†å‘˜æƒé™ (Admin)
æ‹¥æœ‰ Mumble æœåŠ¡å™¨çš„å®Œå…¨æ§åˆ¶æƒï¼š
- âœ… è¸¢å‡ºç”¨æˆ·
- âœ… å°ç¦ç”¨æˆ·  
- âœ… é™éŸ³/å–æ¶ˆé™éŸ³ç”¨æˆ·
- âœ… ç§»åŠ¨ç”¨æˆ·åˆ°ä»»æ„é¢‘é“
- âœ… åˆ›å»º/åˆ é™¤é¢‘é“
- âœ… ç®¡ç†æœåŠ¡å™¨è®¾ç½®
- âœ… æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯

### ç‰ˆä¸»æƒé™ (Moderator)
é€‚ç”¨äºå†›å›¢ CEO å’Œè‘£äº‹ï¼š
- âœ… è¸¢å‡ºç”¨æˆ·
- âœ… é™éŸ³/å–æ¶ˆé™éŸ³ç”¨æˆ·
- âœ… ç§»åŠ¨ç”¨æˆ·
- âœ… åˆ›å»ºä¸´æ—¶é¢‘é“
- âŒ å°ç¦ç”¨æˆ·
- âŒ åˆ é™¤æ°¸ä¹…é¢‘é“

### æ™®é€šç”¨æˆ·æƒé™ (User)
åŸºæœ¬è¯­éŸ³é€šä¿¡æƒé™ï¼š
- âœ… è¿›å…¥å…è®¸çš„é¢‘é“
- âœ… è¯­éŸ³é€šè¯
- âœ… æ–‡å­—æ¶ˆæ¯
- âœ… ç§èŠ
- âŒ ç®¡ç†åŠŸèƒ½

## ğŸ“‹ ç®¡ç†å‘˜åˆ†é…æ–¹å¼

### 1. SeAT è¶…çº§ç®¡ç†å‘˜
æ‹¥æœ‰ `global.superuser` æƒé™çš„ç”¨æˆ·è‡ªåŠ¨è·å¾— Mumble ç®¡ç†å‘˜æƒé™ã€‚

### 2. é…ç½®çš„ç®¡ç†å‘˜ç”¨æˆ·
é€šè¿‡ä»¥ä¸‹æ–¹å¼æ‰‹åŠ¨æŒ‡å®šç®¡ç†å‘˜ï¼š

#### Web ç•Œé¢æ–¹å¼
1. è®¿é—® **Connector** â†’ **Permissions** â†’ **Mumble**
2. åœ¨"æ·»åŠ ç®¡ç†å‘˜"æ¡†ä¸­è¾“å…¥ï¼š
   - ç”¨æˆ·IDï¼ˆå¦‚ï¼š123ï¼‰
   - SeAT ç”¨æˆ·åï¼ˆå¦‚ï¼šJohnDoeï¼‰
   - EVE è§’è‰²åï¼ˆå¦‚ï¼šJohn Doeï¼‰
3. ç‚¹å‡»"æ·»åŠ "

#### å‘½ä»¤è¡Œæ–¹å¼
```bash
# æ·»åŠ ç®¡ç†å‘˜
php artisan mumble:permissions add-admin --user="John Doe"

# ç§»é™¤ç®¡ç†å‘˜
php artisan mumble:permissions remove-admin --user="John Doe"

# æŸ¥çœ‹å½“å‰é…ç½®
php artisan mumble:permissions list
```

### 3. SeAT è§’è‰²æƒé™
åˆ›å»ºä»¥ä¸‹ SeAT è§’è‰²å¯è‡ªåŠ¨è·å¾—å¯¹åº”æƒé™ï¼š

| SeAT è§’è‰²å | Mumble æƒé™çº§åˆ« |
|-------------|-----------------|
| `mumble_admin` | ç®¡ç†å‘˜ |
| `voice_admin` | ç®¡ç†å‘˜ |
| `mumble_moderator` | ç‰ˆä¸» |
| `voice_moderator` | ç‰ˆä¸» |
| `fleet_commander` | ç‰ˆä¸»ï¼ˆèˆ°é˜Ÿé¢‘é“ï¼‰ |

### 4. å†›å›¢èŒä½æƒé™
åŸºäº EVE å†›å›¢èŒä½è‡ªåŠ¨åˆ†é…æƒé™ï¼š

| å†›å›¢èŒä½ | Mumble æƒé™çº§åˆ« |
|----------|-----------------|
| CEO | ç‰ˆä¸» |
| Directorï¼ˆè‘£äº‹ï¼‰ | ç‰ˆä¸» |
| Member | æ™®é€šç”¨æˆ· |

## ğŸš€ ä½¿ç”¨è¯´æ˜

### æ­¥éª¤1ï¼šé…ç½®ç®¡ç†å‘˜

#### æ–¹æ³•Aï¼šä½¿ç”¨ Web ç•Œé¢
1. ç™»å½• SeAT ç®¡ç†ç•Œé¢
2. è®¿é—® **Connector** â†’ **Permissions** â†’ **Mumble**
3. æ·»åŠ ç®¡ç†å‘˜ç”¨æˆ·

#### æ–¹æ³•Bï¼šä½¿ç”¨å‘½ä»¤è¡Œ
```bash
# æ·»åŠ å¤šä¸ªç®¡ç†å‘˜
php artisan mumble:permissions add-admin --user="12345"     # ç”¨æˆ·ID
php artisan mumble:permissions add-admin --user="AdminUser" # ç”¨æˆ·å
php artisan mumble:permissions add-admin --user="John Doe"  # è§’è‰²å
```

### æ­¥éª¤2ï¼šåŒæ­¥æƒé™åˆ° Mumble

#### Web ç•Œé¢åŒæ­¥
1. åœ¨æƒé™ç®¡ç†é¡µé¢ç‚¹å‡»"åŒæ­¥æƒé™åˆ° Mumble"
2. ç­‰å¾…åŒæ­¥å®Œæˆ

#### å‘½ä»¤è¡ŒåŒæ­¥
```bash
# é¢„è§ˆåŒæ­¥æ“ä½œ
php artisan mumble:permissions sync --dry-run

# å®é™…æ‰§è¡ŒåŒæ­¥
php artisan mumble:permissions sync
```

### æ­¥éª¤3ï¼šéªŒè¯æƒé™

#### æ£€æŸ¥ç‰¹å®šç”¨æˆ·æƒé™
```bash
php artisan mumble:permissions show --user="John Doe"
```

#### æµ‹è¯•æƒé™ç³»ç»Ÿ
```bash
php artisan mumble:permissions test
```

## ğŸ“Š æƒé™ç®¡ç†ç•Œé¢

### è®¿é—®è·¯å¾„
- **URL**: `/seat-connector/permissions/mumble`
- **æƒé™è¦æ±‚**: `global.superuser`

### ç•Œé¢åŠŸèƒ½

#### ç®¡ç†å‘˜ç®¡ç†åŒºåŸŸ
- **æ·»åŠ ç®¡ç†å‘˜**: è¾“å…¥ç”¨æˆ·æ ‡è¯†æ·»åŠ æ–°ç®¡ç†å‘˜
- **ç®¡ç†å‘˜åˆ—è¡¨**: æ˜¾ç¤ºå½“å‰æ‰€æœ‰ç®¡ç†å‘˜åŠå…¶è¯¦æƒ…
- **ç§»é™¤ç®¡ç†å‘˜**: ä¸€é”®ç§»é™¤ç®¡ç†å‘˜æƒé™

#### ç”¨æˆ·ç»Ÿè®¡åŒºåŸŸ
- **æ€»ç”¨æˆ·æ•°**: æ˜¾ç¤ºå·²æ³¨å†Œçš„ Mumble ç”¨æˆ·æ€»æ•°
- **ç®¡ç†å‘˜æ•°é‡**: å½“å‰é…ç½®çš„ç®¡ç†å‘˜æ•°é‡
- **æ–°å¢ç”¨æˆ·**: æœ€è¿‘7å¤©æ–°æ³¨å†Œçš„ç”¨æˆ·æ•°é‡

#### æƒé™é…ç½®åŒºåŸŸ
- **è§’è‰²æƒé™è¡¨**: æ˜¾ç¤ºæ¯ä¸ªè§’è‰²æ‹¥æœ‰çš„å…·ä½“æƒé™
- **æƒé™è¯´æ˜**: è¯¦ç»†è§£é‡Šå„æƒé™çº§åˆ«

## ğŸ”„ è‡ªåŠ¨åŒ–æœºåˆ¶

### 1. ç”¨æˆ·æ³¨å†Œæ—¶è‡ªåŠ¨åˆ†é…æƒé™
æ–°ç”¨æˆ·æ³¨å†Œ Mumble æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ï¼š
- æ£€æŸ¥ç”¨æˆ·çš„ SeAT è§’è‰²
- æ£€æŸ¥å†›å›¢èŒä½
- åˆ†é…ç›¸åº”çš„æƒé™çº§åˆ«

### 2. è§’è‰²å˜åŒ–æ—¶è‡ªåŠ¨æ›´æ–°
å½“ç”¨æˆ·çš„ä»¥ä¸‹ä¿¡æ¯å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ›´æ–°æƒé™ï¼š
- SeAT è§’è‰²å˜åŒ–
- å†›å›¢èŒä½å˜åŒ–
- ä¸»è§’è‰²å˜åŒ–

### 3. å®šæœŸæƒé™åŒæ­¥
å»ºè®®è®¾ç½®å®šæœŸä»»åŠ¡æ¥åŒæ­¥æƒé™ï¼š

```bash
# æ·»åŠ åˆ° crontab
0 2 * * * php artisan mumble:permissions sync
```

## ğŸ› ï¸ é«˜çº§é…ç½®

### è‡ªå®šä¹‰æƒé™é…ç½®
å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶è‡ªå®šä¹‰æƒé™æ˜ å°„ï¼š

```php
// config/mumble-connector.php
'permission_mapping' => [
    'custom_role' => [
        'kick' => true,
        'mute' => true,
        'move' => false,
        'create_channel' => true,
    ],
    // ... å…¶ä»–è§’è‰²
],
```

### æ‰¹é‡ç®¡ç†å‘˜è®¾ç½®
å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é¢„è®¾ç®¡ç†å‘˜ï¼š

```env
MUMBLE_ADMIN_USERS="user1,user2,Character Name,12345"
```

## ğŸ“ å‘½ä»¤è¡Œå‚è€ƒ

### æƒé™ç®¡ç†å‘½ä»¤
```bash
# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨æ“ä½œ
php artisan mumble:permissions

# åˆ—å‡ºå½“å‰é…ç½®
php artisan mumble:permissions list

# æ·»åŠ ç®¡ç†å‘˜
php artisan mumble:permissions add-admin --user="æ ‡è¯†"

# ç§»é™¤ç®¡ç†å‘˜  
php artisan mumble:permissions remove-admin --user="æ ‡è¯†"

# æ˜¾ç¤ºç”¨æˆ·æƒé™è¯¦æƒ…
php artisan mumble:permissions show --user="æ ‡è¯†"

# åŒæ­¥æƒé™ï¼ˆé¢„è§ˆæ¨¡å¼ï¼‰
php artisan mumble:permissions sync --dry-run

# åŒæ­¥æƒé™ï¼ˆå®é™…æ‰§è¡Œï¼‰
php artisan mumble:permissions sync

# æµ‹è¯•æƒé™ç³»ç»Ÿ
php artisan mumble:permissions test
```

## ğŸ” æ•…éšœæ’é™¤

### æƒé™æœªç”Ÿæ•ˆ
1. **æ£€æŸ¥ Ice è¿æ¥**ï¼š
   ```bash
   php artisan mumble:test-ice
   ```

2. **æ‰‹åŠ¨åŒæ­¥æƒé™**ï¼š
   ```bash
   php artisan mumble:permissions sync
   ```

3. **æ£€æŸ¥ç”¨æˆ·æƒé™**ï¼š
   ```bash
   php artisan mumble:permissions show --user="ç”¨æˆ·å"
   ```

### ç®¡ç†å‘˜æƒé™æ— æ³•æ·»åŠ 
1. **éªŒè¯ç”¨æˆ·å­˜åœ¨**ï¼šç¡®ä¿ç”¨æˆ·å·²åœ¨ SeAT ä¸­æ³¨å†Œ
2. **æ£€æŸ¥ç”¨æˆ·æ ‡è¯†**ï¼šç¡®ä¿è¾“å…¥çš„ç”¨æˆ·ID/ç”¨æˆ·å/è§’è‰²åæ­£ç¡®
3. **æŸ¥çœ‹æ—¥å¿—**ï¼šæ£€æŸ¥ Laravel æ—¥å¿—æ–‡ä»¶è·å–é”™è¯¯è¯¦æƒ…

### åŒæ­¥å¤±è´¥
1. **æ£€æŸ¥ Mumble æœåŠ¡å™¨çŠ¶æ€**ï¼š
   ```bash
   sudo systemctl status mumble-server
   ```

2. **éªŒè¯ Ice é…ç½®**ï¼š
   ```bash
   php artisan mumble:ice validate
   ```

3. **æŸ¥çœ‹åŒæ­¥æ—¥å¿—**ï¼š
   ```bash
   tail -f storage/logs/laravel.log | grep -i mumble
   ```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. æƒé™åˆ†å±‚ç®¡ç†
- **å…¨å±€ç®¡ç†å‘˜**: 1-2ä¸ªè¶…çº§ç®¡ç†å‘˜
- **å†›å›¢ç®¡ç†å‘˜**: CEO å’Œä¸»è¦è‘£äº‹
- **ä¸´æ—¶ç®¡ç†å‘˜**: æ´»åŠ¨æœŸé—´çš„ä¸´æ—¶æƒé™

### 2. å®šæœŸå®¡æ ¸
- æ¯æœˆæ£€æŸ¥ç®¡ç†å‘˜åˆ—è¡¨
- ç§»é™¤ç¦»å¼€å†›å›¢çš„ç”¨æˆ·æƒé™
- æ›´æ–°æƒé™é…ç½®

### 3. å®‰å…¨è€ƒè™‘
- ä»…å°†ç®¡ç†å‘˜æƒé™æˆäºˆå¯ä¿¡ç”¨æˆ·
- å®šæœŸè½®æ¢ç®¡ç†å‘˜
- ç›‘æ§æƒé™ä½¿ç”¨æ—¥å¿—

### 4. æ–‡æ¡£è®°å½•
- è®°å½•æ‰€æœ‰æƒé™å˜æ›´
- ç»´æŠ¤ç®¡ç†å‘˜è”ç³»æ–¹å¼
- å»ºç«‹æƒé™ç”³è¯·æµç¨‹

---

é€šè¿‡è¿™å¥—å®Œæ•´çš„æƒé™ç®¡ç†ç³»ç»Ÿï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°ä¸º Mumble æœåŠ¡å™¨é…ç½®å’Œç®¡ç†ç”¨æˆ·æƒé™ï¼Œç¡®ä¿è¯­éŸ³é€šä¿¡çš„ç§©åºå’Œå®‰å…¨ï¼